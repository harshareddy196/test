
from string_matching import convert_ocrs_to_char_dict_only_al_num
from string_matching import string_match_python
from string_matching import remove_all_except_al_num
from string_matching import merge_coord
from string_matching import make_keyword_string
from string_matching import sort_ocr
import pdb

import math


def caculate_dis(box1, box2):
    mid1 = (
                box1['left']+int(abs(box1['left']-box1['right'])/2),
                box1['top']+int(abs(box1['top']-box1['bottom'])/2)
            )
    mid2 = (
                box2['x']+int(abs(box2['x']-(box2['x'] + box2['width']))/2),
                box2['y']+int(abs(box2['y']-(box2['y'] + box2['height']))/2)
            )

    width = box1['right'] - mid1[0] + box2['right'] - mid2[0]
    height = box1['bottom'] - mid1[1] + box2['bottom'] - mid2[1]

    dist = math.hypot(mid2[0] - mid1[0] - width, mid2[1] - mid1[1] - height)

    return dist

def calculate_threhold(width, height):
    return math.hypot(width, height)*DISTANCE_THRESHOLD


def get_pre_process_char(pre_process_char, ocr_data, page_no):
    """
    """
    if not pre_process_char:
        print('pre prossesing not done, VERY BADDDDD!!!')
        char_index_list, haystack = convert_ocrs_to_char_dict_only_al_num(ocr_data[page_no])
    else:
        try:
            char_index_list, haystack = pre_process_char[page_no]
        except:
            char_index_list, haystack = convert_ocrs_to_char_dict_only_al_num(ocr_data[page_no])

    return char_index_list, haystack


def get_nearest(coords, scope):
    dis = []

    for coord in coords:
        dis.append(caculate_dis(coord, scope))
    try:
        return dis.index(min(dis))
    except:
        return None




def compute_all_key_list_coord(keyList, char_index_list, haystack, scope):
    """
    """

    keyCords_list = []
    keywords_list = []
    indexes_list = []
    counter = 0

    for key in keyList:
        key_param = remove_all_except_al_num(key)
        keyCords, keywords, indexes = string_match_python(key_param, char_index_list, haystack)
        # keyCords, keywords = string_match_naive(key_param, ocr_data[page_no], pre_process_char[page_no][0], pre_process_char[page_no][1])
        if not keywords:
            counter = 0
            break
            
        index = get_nearest(keyCords, scope)
        if index is None:
            continue
        counter = len(keyCords)
        keywords_list.append(keywords[index])
        keyCords_list.append(keyCords[index])
        indexes_list.append(indexes[index])

    # keywords_list.sort(key=len)
    # keyCords_list.sort(key=len)
    # indexes.sort(key=len)

    return keyCords_list, keywords_list, counter, indexes_list


def get_index(ocr_data, trained_info):
    points = []
    for field, field_info in trained_info.items():
        print(f'Field: {field}')
        keyword = field_info['keyword']

        if not keyword or keyword is None:
            print('No keyword. Skipping.')
            continue
        
        #list of keyword that you want indexes for
        keyList=keyword.split()
        keyList = [remove_all_except_al_num(' '.join(keyList))]
        
        scope = field_info['scope']
        page_no = field_info['page']
        pre_processed_char = []
        
        for page in ocr_data:
            page = sort_ocr(page)
            char_index_list, haystack = convert_ocrs_to_char_dict_only_al_num(page)
            pre_processed_char.append([char_index_list, haystack])
            
            char_index_list, haystack = get_pre_process_char(pre_processed_char, ocr_data, page_no)
            keyCords_list, keywords_list, counter, indexes = compute_all_key_list_coord(keyList, char_index_list, haystack, scope)
            
            print(keyCords_list, keywords_list)
            print(haystack)
            print(keyList)
            if keyCords_list and keywords_list:
                points.append({'field': field, 'keyword': keyword, 'index': indexes, 'cordinates': keyCords_list[0], 'ocr_text': haystack})
            else:
                print('Keyword not found. Skipping')

    return points
    
if __name__ == "__main__":
    ocr_data = [[{'width': 36, 'height': 14, 'top': 19, 'bottom': 33, 'right': 55, 'left': 19, 'word': 'GSTIN', 'confidence': 100}, {'width': 4, 'height': 14, 'top': 19, 'bottom': 33, 'right': 66, 'left': 62, 'word': ':', 'confidence': 100}, {'width': 105, 'height': 14, 'top': 19, 'bottom': 33, 'right': 179, 'left': 74, 'word': '03ALTPS0390R1Z9', 'confidence': 100}, {'width': 37, 'height': 14, 'top': 19, 'bottom': 33, 'right': 507, 'left': 470, 'word': 'Original', 'confidence': 100}, {'width': 14, 'height': 14, 'top': 19, 'bottom': 33, 'right': 525, 'left': 511, 'word': 'for', 'confidence': 100}, {'width': 43, 'height': 14, 'top': 19, 'bottom': 33, 'right': 572, 'left': 528, 'word': 'Recipient', 'confidence': 100}, {'width': 24, 'height': 14, 'top': 19, 'bottom': 33, 'right': 599, 'left': 575, 'word': 'Copy', 'confidence': 100}, {'width': 3, 'height': 10, 'top': 32, 'bottom': 43, 'right': 162, 'left': 158, 'word': '(', 'confidence': 100}, {'width': 24, 'height': 10, 'top': 32, 'bottom': 43, 'right': 189, 'left': 165, 'word': 'Input', 'confidence': 100}, {'width': 16, 'height': 10, 'top': 32, 'bottom': 43, 'right': 208, 'left': 191, 'word': 'Tax', 'confidence': 100}, {'width': 27, 'height': 10, 'top': 32, 'bottom': 43, 'right': 237, 'left': 210, 'word': 'Credit', 'confidence': 100}, {'width': 6, 'height': 10, 'top': 32, 'bottom': 43, 'right': 246, 'left': 239, 'word': 'is', 'confidence': 100}, {'width': 39, 'height': 10, 'top': 32, 'bottom': 43, 'right': 289, 'left': 249, 'word': 'available', 'confidence': 100}, {'width': 8, 'height': 10, 'top': 32, 'bottom': 43, 'right': 299, 'left': 291, 'word': 'to', 'confidence': 100}, {'width': 4, 'height': 10, 'top': 32, 'bottom': 43, 'right': 307, 'left': 303, 'word': 'a', 'confidence': 100}, {'width': 32, 'height': 10, 'top': 32, 'bottom': 43, 'right': 343, 'left': 310, 'word': 'taxable', 'confidence': 100}, {'width': 30, 'height': 10, 'top': 32, 'bottom': 43, 'right': 376, 'left': 345, 'word': 'person', 'confidence': 100}, {'width': 31, 'height': 10, 'top': 32, 'bottom': 43, 'right': 410, 'left': 378, 'word': 'against', 'confidence': 100}, {'width': 16, 'height': 10, 'top': 32, 'bottom': 43, 'right': 430, 'left': 413, 'word': 'this', 'confidence': 100}, {'width': 20, 'height': 10, 'top': 32, 'bottom': 43, 'right': 453, 'left': 432, 'word': 'copy', 'confidence': 100}, {'width': 4, 'height': 10, 'top': 32, 'bottom': 43, 'right': 459, 'left': 455, 'word': ')', 'confidence': 100}, {'width': 21, 'height': 13, 'top': 45, 'bottom': 59, 'right': 292, 'left': 270, 'word': 'TAX', 'confidence': 100}, {'width': 49, 'height': 13, 'top': 45, 'bottom': 59, 'right': 343, 'left': 294, 'word': 'INVOICE', 'confidence': 100}, {'width': 30, 'height': 24, 'top': 59, 'bottom': 83, 'right': 247, 'left': 216, 'word': 'S.S', 'confidence': 100}, {'width': 147, 'height': 24, 'top': 59, 'bottom': 83, 'right': 400, 'left': 252, 'word': 'CONSULTANTS', 'confidence': 100}, {'width': 20, 'height': 14, 'top': 79, 'bottom': 94, 'right': 191, 'left': 170, 'word': 'SCO', 'confidence': 100}, {'width': 33, 'height': 14, 'top': 79, 'bottom': 94, 'right': 228, 'left': 194, 'word': 'NO.21,', 'confidence': 100}, {'width': 40, 'height': 14, 'top': 79, 'bottom': 94, 'right': 272, 'left': 232, 'word': 'CHAURA', 'confidence': 100}, {'width': 35, 'height': 14, 'top': 79, 'bottom': 94, 'right': 312, 'left': 276, 'word': 'BAZAR,', 'confidence': 100}, {'width': 27, 'height': 14, 'top': 79, 'bottom': 94, 'right': 342, 'left': 315, 'word': 'NEAR', 'confidence': 100}, {'width': 73, 'height': 14, 'top': 79, 'bottom': 94, 'right': 419, 'left': 345, 'word': 'CORPORATION', 'confidence': 100}, {'width': 27, 'height': 14, 'top': 79, 'bottom': 94, 'right': 449, 'left': 422, 'word': 'BANK', 'confidence': 100}, {'width': 50, 'height': 13, 'top': 93, 'bottom': 106, 'right': 244, 'left': 193, 'word': 'ZIRAKPUR', 'confidence': 100}, {'width': 78, 'height': 13, 'top': 93, 'bottom': 106, 'right': 326, 'left': 247, 'word': 'MOHALI-140603', 'confidence': 100}, {'width': 93, 'height': 13, 'top': 93, 'bottom': 106, 'right': 423, 'left': 330, 'word': '(PAN-ALTPS0390R)', 'confidence': 100}, {'width': 16, 'height': 10, 'top': 106, 'bottom': 117, 'right': 143, 'left': 126, 'word': 'Tel.', 'confidence': 100}, {'width': 3, 'height': 10, 'top': 106, 'bottom': 117, 'right': 148, 'left': 145, 'word': ':', 'confidence': 100}, {'width': 65, 'height': 10, 'top': 106, 'bottom': 117, 'right': 216, 'left': 151, 'word': '01762-522745', 'confidence': 100}, {'width': 24, 'height': 10, 'top': 106, 'bottom': 117, 'right': 248, 'left': 224, 'word': 'email', 'confidence': 100}, {'width': 3, 'height': 10, 'top': 106, 'bottom': 117, 'right': 253, 'left': 250, 'word': ':', 'confidence': 100}, {'width': 137, 'height': 10, 'top': 106, 'bottom': 117, 'right': 394, 'left': 256, 'word': 'ssconsultants_35@yahoo.co.in,', 'confidence': 100}, {'width': 96, 'height': 10, 'top': 106, 'bottom': 117, 'right': 493, 'left': 397, 'word': 'ssc.fire35@gmail.com', 'confidence': 100}, {'width': 35, 'height': 13, 'top': 132, 'bottom': 145, 'right': 54, 'left': 19, 'word': 'Invoice', 'confidence': 100}, {'width': 17, 'height': 13, 'top': 132, 'bottom': 145, 'right': 75, 'left': 58, 'word': 'No.', 'confidence': 100}, {'width': 4, 'height': 13, 'top': 132, 'bottom': 145, 'right': 114, 'left': 110, 'word': ':', 'confidence': 100}, {'width': 67, 'height': 13, 'top': 132, 'bottom': 145, 'right': 190, 'left': 122, 'word': 'GST/19-20/68', 'confidence': 100}, {'width': 35, 'height': 13, 'top': 132, 'bottom': 145, 'right': 345, 'left': 310, 'word': 'Vehicle', 'confidence': 100}, {'width': 16, 'height': 13, 'top': 132, 'bottom': 145, 'right': 365, 'left': 349, 'word': 'No.', 'confidence': 100}, {'width': 4, 'height': 13, 'top': 132, 'bottom': 145, 'right': 406, 'left': 401, 'word': ':', 'confidence': 100}, {'width': 22, 'height': 13, 'top': 145, 'bottom': 158, 'right': 42, 'left': 19, 'word': 'Date', 'confidence': 100}, {'width': 9, 'height': 13, 'top': 145, 'bottom': 158, 'right': 55, 'left': 45, 'word': 'of', 'confidence': 100}, {'width': 35, 'height': 13, 'top': 145, 'bottom': 158, 'right': 94, 'left': 59, 'word': 'Invoice', 'confidence': 100}, {'width': 4, 'height': 13, 'top': 145, 'bottom': 158, 'right': 114, 'left': 110, 'word': ':', 'confidence': 100}, {'width': 55, 'height': 13, 'top': 145, 'bottom': 158, 'right': 178, 'left': 122, 'word': '30-04-2019', 'confidence': 100}, {'width': 33, 'height': 13, 'top': 145, 'bottom': 158, 'right': 344, 'left': 310, 'word': 'Station', 'confidence': 100}, {'width': 4, 'height': 13, 'top': 145, 'bottom': 158, 'right': 406, 'left': 401, 'word': ':', 'confidence': 100}, {'width': 27, 'height': 13, 'top': 145, 'bottom': 158, 'right': 441, 'left': 413, 'word': 'Baddi', 'confidence': 100}, {'width': 25, 'height': 13, 'top': 158, 'bottom': 171, 'right': 44, 'left': 19, 'word': 'Place', 'confidence': 100}, {'width': 8, 'height': 13, 'top': 158, 'bottom': 171, 'right': 58, 'left': 49, 'word': 'of', 'confidence': 100}, {'width': 32, 'height': 13, 'top': 158, 'bottom': 171, 'right': 94, 'left': 61, 'word': 'Supply', 'confidence': 100}, {'width': 4, 'height': 13, 'top': 158, 'bottom': 171, 'right': 114, 'left': 110, 'word': ':', 'confidence': 100}, {'width': 44, 'height': 13, 'top': 158, 'bottom': 171, 'right': 167, 'left': 122, 'word': 'Himachal', 'confidence': 100}, {'width': 38, 'height': 13, 'top': 158, 'bottom': 171, 'right': 209, 'left': 170, 'word': 'Pradesh', 'confidence': 100}, {'width': 20, 'height': 13, 'top': 158, 'bottom': 171, 'right': 233, 'left': 212, 'word': '(02)', 'confidence': 100}, {'width': 31, 'height': 13, 'top': 158, 'bottom': 171, 'right': 342, 'left': 310, 'word': 'E-Way', 'confidence': 100}, {'width': 14, 'height': 13, 'top': 158, 'bottom': 171, 'right': 360, 'left': 345, 'word': 'Bill', 'confidence': 100}, {'width': 16, 'height': 13, 'top': 158, 'bottom': 171, 'right': 379, 'left': 363, 'word': 'No.', 'confidence': 100}, {'width': 4, 'height': 13, 'top': 158, 'bottom': 171, 'right': 406, 'left': 401, 'word': ':', 'confidence': 100}, {'width': 39, 'height': 13, 'top': 171, 'bottom': 185, 'right': 59, 'left': 19, 'word': 'Reverse', 'confidence': 100}, {'width': 33, 'height': 13, 'top': 171, 'bottom': 185, 'right': 96, 'left': 62, 'word': 'Charge', 'confidence': 100}, {'width': 4, 'height': 13, 'top': 171, 'bottom': 185, 'right': 114, 'left': 110, 'word': ':', 'confidence': 100}, {'width': 7, 'height': 13, 'top': 171, 'bottom': 185, 'right': 130, 'left': 122, 'word': 'N', 'confidence': 100}, {'width': 43, 'height': 13, 'top': 171, 'bottom': 185, 'right': 354, 'left': 310, 'word': 'Purchase', 'confidence': 100}, {'width': 27, 'height': 13, 'top': 171, 'bottom': 185, 'right': 385, 'left': 357, 'word': 'Order', 'confidence': 100}, {'width': 4, 'height': 13, 'top': 171, 'bottom': 185, 'right': 406, 'left': 401, 'word': ':', 'confidence': 100}, {'width': 60, 'height': 13, 'top': 171, 'bottom': 185, 'right': 474, 'left': 413, 'word': '5600002682', 'confidence': 100}, {'width': 32, 'height': 13, 'top': 185, 'bottom': 198, 'right': 52, 'left': 19, 'word': 'GR/RR', 'confidence': 100}, {'width': 16, 'height': 13, 'top': 185, 'bottom': 198, 'right': 72, 'left': 55, 'word': 'No.', 'confidence': 100}, {'width': 4, 'height': 13, 'top': 185, 'bottom': 198, 'right': 114, 'left': 110, 'word': ':', 'confidence': 100}, {'width': 27, 'height': 13, 'top': 185, 'bottom': 198, 'right': 338, 'left': 310, 'word': 'Order', 'confidence': 100}, {'width': 21, 'height': 13, 'top': 185, 'bottom': 198, 'right': 364, 'left': 342, 'word': 'Date', 'confidence': 100}, {'width': 4, 'height': 13, 'top': 185, 'bottom': 198, 'right': 406, 'left': 401, 'word': ':', 'confidence': 100}, {'width': 55, 'height': 13, 'top': 185, 'bottom': 198, 'right': 469, 'left': 413, 'word': '08-02-2019', 'confidence': 100}, {'width': 47, 'height': 13, 'top': 198, 'bottom': 211, 'right': 66, 'left': 19, 'word': 'Transport', 'confidence': 100}, {'width': 4, 'height': 13, 'top': 198, 'bottom': 211, 'right': 114, 'left': 110, 'word': ':', 'confidence': 100}, {'width': 12, 'height': 13, 'top': 198, 'bottom': 211, 'right': 134, 'left': 122, 'word': 'By', 'confidence': 100}, {'width': 18, 'height': 13, 'top': 198, 'bottom': 211, 'right': 156, 'left': 137, 'word': 'Self', 'confidence': 100}, {'width': 31, 'height': 14, 'top': 223, 'bottom': 237, 'right': 51, 'left': 19, 'word': 'Billed', 'confidence': 100}, {'width': 10, 'height': 14, 'top': 223, 'bottom': 237, 'right': 65, 'left': 54, 'word': 'to', 'confidence': 100}, {'width': 4, 'height': 14, 'top': 223, 'bottom': 237, 'right': 82, 'left': 77, 'word': ':', 'confidence': 100}, {'width': 44, 'height': 14, 'top': 223, 'bottom': 237, 'right': 355, 'left': 310, 'word': 'Shipped', 'confidence': 100}, {'width': 10, 'height': 14, 'top': 223, 'bottom': 237, 'right': 370, 'left': 359, 'word': 'to', 'confidence': 100}, {'width': 3, 'height': 14, 'top': 223, 'bottom': 237, 'right': 378, 'left': 375, 'word': ':', 'confidence': 100}, {'width': 48, 'height': 13, 'top': 236, 'bottom': 249, 'right': 67, 'left': 19, 'word': 'Dr.Reddy', 'confidence': 100}, {'width': 4, 'height': 13, 'top': 236, 'bottom': 249, 'right': 75, 'left': 71, 'word': 's', 'confidence': 100}, {'width': 39, 'height': 13, 'top': 236, 'bottom': 249, 'right': 118, 'left': 78, 'word': 'Lab.Ltd.', 'confidence': 100}, {'width': 19, 'height': 13, 'top': 236, 'bottom': 249, 'right': 141, 'left': 121, 'word': 'FTO', 'confidence': 100}, {'width': 19, 'height': 13, 'top': 236, 'bottom': 249, 'right': 164, 'left': 144, 'word': 'Unit', 'confidence': 100}, {'width': 6, 'height': 13, 'top': 236, 'bottom': 249, 'right': 174, 'left': 167, 'word': '6', 'confidence': 100}, {'width': 47, 'height': 13, 'top': 236, 'bottom': 249, 'right': 357, 'left': 310, 'word': 'Dr.Reddy', 'confidence': 100}, {'width': 4, 'height': 13, 'top': 236, 'bottom': 249, 'right': 366, 'left': 362, 'word': 's', 'confidence': 100}, {'width': 39, 'height': 13, 'top': 236, 'bottom': 249, 'right': 409, 'left': 370, 'word': 'Lab.Ltd.', 'confidence': 100}, {'width': 19, 'height': 13, 'top': 236, 'bottom': 249, 'right': 432, 'left': 412, 'word': 'FTO', 'confidence': 100}, {'width': 19, 'height': 13, 'top': 236, 'bottom': 249, 'right': 455, 'left': 435, 'word': 'Unit', 'confidence': 100}, {'width': 6, 'height': 13, 'top': 236, 'bottom': 249, 'right': 465, 'left': 458, 'word': '6', 'confidence': 100}, {'width': 20, 'height': 13, 'top': 249, 'bottom': 262, 'right': 40, 'left': 19, 'word': 'FTO', 'confidence': 100}, {'width': 19, 'height': 13, 'top': 249, 'bottom': 262, 'right': 63, 'left': 43, 'word': 'Unit', 'confidence': 100}, {'width': 5, 'height': 13, 'top': 249, 'bottom': 262, 'right': 72, 'left': 66, 'word': '6', 'confidence': 100}, {'width': 20, 'height': 13, 'top': 249, 'bottom': 262, 'right': 331, 'left': 310, 'word': 'FTO', 'confidence': 100}, {'width': 18, 'height': 13, 'top': 249, 'bottom': 262, 'right': 353, 'left': 335, 'word': 'Unit', 'confidence': 100}, {'width': 5, 'height': 13, 'top': 249, 'bottom': 262, 'right': 363, 'left': 357, 'word': '6', 'confidence': 100}, {'width': 85, 'height': 13, 'top': 262, 'bottom': 275, 'right': 105, 'left': 19, 'word': 'Vill:Khol,Nalagarh', 'confidence': 100}, {'width': 24, 'height': 13, 'top': 262, 'bottom': 275, 'right': 133, 'left': 109, 'word': 'Road', 'confidence': 100}, {'width': 85, 'height': 13, 'top': 262, 'bottom': 275, 'right': 396, 'left': 310, 'word': 'Vill:Khol,Nalagarh', 'confidence': 100}, {'width': 25, 'height': 13, 'top': 262, 'bottom': 275, 'right': 424, 'left': 399, 'word': 'Road', 'confidence': 100}, {'width': 27, 'height': 13, 'top': 275, 'bottom': 289, 'right': 47, 'left': 19, 'word': 'Baddi', 'confidence': 100}, {'width': 25, 'height': 13, 'top': 275, 'bottom': 289, 'right': 75, 'left': 50, 'word': '(H.P)', 'confidence': 100}, {'width': 27, 'height': 13, 'top': 275, 'bottom': 289, 'right': 338, 'left': 310, 'word': 'Baddi', 'confidence': 100}, {'width': 25, 'height': 13, 'top': 275, 'bottom': 289, 'right': 366, 'left': 341, 'word': '(H.P)', 'confidence': 100}, {'width': 25, 'height': 13, 'top': 302, 'bottom': 315, 'right': 44, 'left': 19, 'word': 'Party', 'confidence': 100}, {'width': 19, 'height': 13, 'top': 302, 'bottom': 315, 'right': 67, 'left': 48, 'word': 'PAN', 'confidence': 100}, {'width': 4, 'height': 13, 'top': 302, 'bottom': 315, 'right': 114, 'left': 110, 'word': ':', 'confidence': 100}, {'width': 65, 'height': 13, 'top': 302, 'bottom': 315, 'right': 188, 'left': 122, 'word': 'AAACD7999Q', 'confidence': 100}, {'width': 25, 'height': 13, 'top': 302, 'bottom': 315, 'right': 336, 'left': 310, 'word': 'Party', 'confidence': 100}, {'width': 19, 'height': 13, 'top': 302, 'bottom': 315, 'right': 359, 'left': 339, 'word': 'PAN', 'confidence': 100}, {'width': 4, 'height': 13, 'top': 302, 'bottom': 315, 'right': 406, 'left': 401, 'word': ':', 'confidence': 100}, {'width': 65, 'height': 13, 'top': 302, 'bottom': 315, 'right': 479, 'left': 413, 'word': 'AAACD7999Q', 'confidence': 100}, {'width': 31, 'height': 13, 'top': 315, 'bottom': 328, 'right': 51, 'left': 19, 'word': 'GSTIN', 'confidence': 100}, {'width': 4, 'height': 13, 'top': 315, 'bottom': 328, 'right': 59, 'left': 54, 'word': '/', 'confidence': 100}, {'width': 18, 'height': 13, 'top': 315, 'bottom': 328, 'right': 81, 'left': 62, 'word': 'UIN', 'confidence': 100}, {'width': 4, 'height': 13, 'top': 315, 'bottom': 328, 'right': 114, 'left': 110, 'word': ':', 'confidence': 100}, {'width': 99, 'height': 13, 'top': 315, 'bottom': 328, 'right': 222, 'left': 122, 'word': '02AAACD7999Q1ZW', 'confidence': 100}, {'width': 31, 'height': 13, 'top': 315, 'bottom': 328, 'right': 342, 'left': 310, 'word': 'GSTIN', 'confidence': 100}, {'width': 4, 'height': 13, 'top': 315, 'bottom': 328, 'right': 350, 'left': 345, 'word': '/', 'confidence': 100}, {'width': 18, 'height': 13, 'top': 315, 'bottom': 328, 'right': 372, 'left': 353, 'word': 'UIN', 'confidence': 100}, {'width': 4, 'height': 13, 'top': 315, 'bottom': 328, 'right': 406, 'left': 401, 'word': ':', 'confidence': 100}, {'width': 99, 'height': 13, 'top': 315, 'bottom': 328, 'right': 513, 'left': 413, 'word': '02AAACD7999Q1ZW', 'confidence': 100}, {'width': 14, 'height': 10, 'top': 340, 'bottom': 351, 'right': 36, 'left': 21, 'word': 'S.N.', 'confidence': 100}, {'width': 50, 'height': 10, 'top': 340, 'bottom': 351, 'right': 91, 'left': 41, 'word': 'Description', 'confidence': 100}, {'width': 8, 'height': 10, 'top': 340, 'bottom': 351, 'right': 102, 'left': 94, 'word': 'of', 'confidence': 100}, {'width': 27, 'height': 10, 'top': 340, 'bottom': 351, 'right': 133, 'left': 106, 'word': 'Goods', 'confidence': 100}, {'width': 30, 'height': 7, 'top': 340, 'bottom': 348, 'right': 260, 'left': 229, 'word': 'HSN/SAC', 'confidence': 100}, {'width': 17, 'height': 10, 'top': 340, 'bottom': 351, 'right': 318, 'left': 301, 'word': 'Qty.', 'confidence': 100}, {'width': 18, 'height': 10, 'top': 340, 'bottom': 351, 'right': 341, 'left': 322, 'word': 'Unit', 'confidence': 100}, {'width': 16, 'height': 10, 'top': 340, 'bottom': 351, 'right': 379, 'left': 363, 'word': 'List', 'confidence': 100}, {'width': 21, 'height': 10, 'top': 340, 'bottom': 351, 'right': 403, 'left': 382, 'word': 'Price', 'confidence': 100}, {'width': 38, 'height': 10, 'top': 340, 'bottom': 351, 'right': 446, 'left': 408, 'word': 'Discount', 'confidence': 100}, {'width': 21, 'height': 10, 'top': 340, 'bottom': 351, 'right': 491, 'left': 469, 'word': 'IGST', 'confidence': 100}, {'width': 21, 'height': 10, 'top': 340, 'bottom': 351, 'right': 534, 'left': 512, 'word': 'IGST', 'confidence': 100}, {'width': 43, 'height': 10, 'top': 340, 'bottom': 351, 'right': 601, 'left': 557, 'word': 'Amount(`)', 'confidence': 100}, {'width': 21, 'height': 10, 'top': 353, 'bottom': 364, 'right': 251, 'left': 229, 'word': 'Code', 'confidence': 100}, {'width': 20, 'height': 10, 'top': 353, 'bottom': 364, 'right': 491, 'left': 470, 'word': 'Rate', 'confidence': 100}, {'width': 29, 'height': 8, 'top': 353, 'bottom': 362, 'right': 534, 'left': 504, 'word': 'Amount', 'confidence': 100}, {'width': 7, 'height': 9, 'top': 379, 'bottom': 389, 'right': 36, 'left': 28, 'word': '1.', 'confidence': 100}, {'width': 17, 'height': 9, 'top': 379, 'bottom': 389, 'right': 59, 'left': 41, 'word': 'AMC', 'confidence': 100}, {'width': 7, 'height': 9, 'top': 379, 'bottom': 389, 'right': 68, 'left': 61, 'word': 'of', 'confidence': 100}, {'width': 14, 'height': 9, 'top': 379, 'bottom': 389, 'right': 86, 'left': 72, 'word': 'Fire', 'confidence': 100}, {'width': 31, 'height': 9, 'top': 379, 'bottom': 389, 'right': 120, 'left': 88, 'word': 'Fighting', 'confidence': 100}, {'width': 44, 'height': 9, 'top': 379, 'bottom': 389, 'right': 167, 'left': 122, 'word': 'Equipments', 'confidence': 100}, {'width': 28, 'height': 9, 'top': 379, 'bottom': 389, 'right': 258, 'left': 229, 'word': '998717', 'confidence': 100}, {'width': 16, 'height': 9, 'top': 379, 'bottom': 389, 'right': 318, 'left': 302, 'word': '1.00', 'confidence': 100}, {'width': 16, 'height': 9, 'top': 379, 'bottom': 389, 'right': 339, 'left': 322, 'word': 'Visit', 'confidence': 100}, {'width': 33, 'height': 9, 'top': 379, 'bottom': 389, 'right': 403, 'left': 370, 'word': '4,200.00', 'confidence': 100}, {'width': 16, 'height': 9, 'top': 379, 'bottom': 389, 'right': 425, 'left': 409, 'word': '0.00', 'confidence': 100}, {'width': 7, 'height': 9, 'top': 379, 'bottom': 389, 'right': 442, 'left': 434, 'word': '%', 'confidence': 100}, {'width': 18, 'height': 8, 'top': 379, 'bottom': 388, 'right': 483, 'left': 465, 'word': '18.00', 'confidence': 100}, {'width': 6, 'height': 8, 'top': 379, 'bottom': 388, 'right': 493, 'left': 487, 'word': '%', 'confidence': 100}, {'width': 26, 'height': 9, 'top': 379, 'bottom': 389, 'right': 536, 'left': 510, 'word': '756.00', 'confidence': 100}, {'width': 33, 'height': 9, 'top': 379, 'bottom': 389, 'right': 601, 'left': 567, 'word': '4,956.00', 'confidence': 100}, {'width': 30, 'height': 9, 'top': 393, 'bottom': 402, 'right': 81, 'left': 50, 'word': 'Monthly', 'confidence': 100}, {'width': 40, 'height': 9, 'top': 393, 'bottom': 402, 'right': 123, 'left': 83, 'word': 'Inspection', 'confidence': 100}, {'width': 3, 'height': 9, 'top': 393, 'bottom': 402, 'right': 129, 'left': 125, 'word': '/', 'confidence': 100}, {'width': 35, 'height': 9, 'top': 393, 'bottom': 402, 'right': 167, 'left': 132, 'word': 'Servicing', 'confidence': 100}, {'width': 8, 'height': 9, 'top': 393, 'bottom': 402, 'right': 178, 'left': 169, 'word': 'Of', 'confidence': 100}, {'width': 14, 'height': 9, 'top': 393, 'bottom': 402, 'right': 195, 'left': 181, 'word': 'The', 'confidence': 100}, {'width': 14, 'height': 9, 'top': 406, 'bottom': 416, 'right': 64, 'left': 50, 'word': 'Fire', 'confidence': 100}, {'width': 48, 'height': 9, 'top': 406, 'bottom': 416, 'right': 114, 'left': 66, 'word': 'Extinguisher', 'confidence': 100}, {'width': 32, 'height': 9, 'top': 406, 'bottom': 416, 'right': 149, 'left': 117, 'word': 'Installed', 'confidence': 100}, {'width': 7, 'height': 9, 'top': 406, 'bottom': 416, 'right': 160, 'left': 153, 'word': 'At', 'confidence': 100}, {'width': 8, 'height': 9, 'top': 406, 'bottom': 416, 'right': 172, 'left': 164, 'word': 'Dr', 'confidence': 100}, {'width': 28, 'height': 9, 'top': 406, 'bottom': 416, 'right': 203, 'left': 175, 'word': 'Reddys', 'confidence': 100}, {'width': 30, 'height': 10, 'top': 418, 'bottom': 429, 'right': 81, 'left': 50, 'word': 'Lab.Ltd.', 'confidence': 100}, {'width': 20, 'height': 10, 'top': 418, 'bottom': 429, 'right': 105, 'left': 84, 'word': 'Baddi', 'confidence': 100}, {'width': 10, 'height': 10, 'top': 431, 'bottom': 442, 'right': 61, 'left': 50, 'word': 'Bill', 'confidence': 100}, {'width': 13, 'height': 10, 'top': 431, 'bottom': 442, 'right': 76, 'left': 63, 'word': 'For', 'confidence': 100}, {'width': 15, 'height': 10, 'top': 431, 'bottom': 442, 'right': 94, 'left': 78, 'word': 'The', 'confidence': 100}, {'width': 16, 'height': 10, 'top': 431, 'bottom': 442, 'right': 112, 'left': 96, 'word': 'M/O', 'confidence': 100}, {'width': 16, 'height': 10, 'top': 431, 'bottom': 442, 'right': 132, 'left': 116, 'word': 'April', 'confidence': 100}, {'width': 18, 'height': 10, 'top': 431, 'bottom': 442, 'right': 154, 'left': 135, 'word': '2019', 'confidence': 100}, {'width': 22, 'height': 9, 'top': 601, 'bottom': 610, 'right': 244, 'left': 221, 'word': 'Grand', 'confidence': 100}, {'width': 19, 'height': 9, 'top': 601, 'bottom': 610, 'right': 266, 'left': 246, 'word': 'Total', 'confidence': 100}, {'width': 19, 'height': 10, 'top': 601, 'bottom': 611, 'right': 318, 'left': 298, 'word': '1.00', 'confidence': 100}, {'width': 19, 'height': 10, 'top': 601, 'bottom': 611, 'right': 342, 'left': 322, 'word': 'Visit', 'confidence': 100}, {'width': 5, 'height': 13, 'top': 601, 'bottom': 614, 'right': 533, 'left': 527, 'word': '`', 'confidence': 100}, {'width': 39, 'height': 10, 'top': 601, 'bottom': 611, 'right': 599, 'left': 560, 'word': '4,956.00', 'confidence': 100}, {'width': 31, 'height': 7, 'top': 627, 'bottom': 634, 'right': 51, 'left': 19, 'word': 'HSN/SAC', 'confidence': 100}, {'width': 14, 'height': 8, 'top': 627, 'bottom': 636, 'right': 81, 'left': 66, 'word': 'Tax', 'confidence': 100}, {'width': 17, 'height': 8, 'top': 627, 'bottom': 636, 'right': 100, 'left': 83, 'word': 'Rate', 'confidence': 100}, {'width': 29, 'height': 8, 'top': 627, 'bottom': 636, 'right': 144, 'left': 114, 'word': 'Taxable', 'confidence': 100}, {'width': 18, 'height': 8, 'top': 627, 'bottom': 636, 'right': 165, 'left': 146, 'word': 'Amt.', 'confidence': 100}, {'width': 18, 'height': 8, 'top': 627, 'bottom': 636, 'right': 191, 'left': 172, 'word': 'IGST', 'confidence': 100}, {'width': 18, 'height': 8, 'top': 627, 'bottom': 636, 'right': 212, 'left': 193, 'word': 'Amt.', 'confidence': 100}, {'width': 22, 'height': 10, 'top': 627, 'bottom': 638, 'right': 245, 'left': 222, 'word': 'Total', 'confidence': 100}, {'width': 15, 'height': 10, 'top': 627, 'bottom': 638, 'right': 262, 'left': 247, 'word': 'Tax', 'confidence': 100}, {'width': 29, 'height': 10, 'top': 639, 'bottom': 650, 'right': 49, 'left': 19, 'word': '998717', 'confidence': 100}, {'width': 18, 'height': 10, 'top': 639, 'bottom': 650, 'right': 85, 'left': 66, 'word': '18%', 'confidence': 100}, {'width': 33, 'height': 10, 'top': 639, 'bottom': 650, 'right': 165, 'left': 131, 'word': '4,200.00', 'confidence': 100}, {'width': 27, 'height': 10, 'top': 639, 'bottom': 650, 'right': 212, 'left': 185, 'word': '756.00', 'confidence': 100}, {'width': 26, 'height': 10, 'top': 639, 'bottom': 650, 'right': 262, 'left': 236, 'word': '756.00', 'confidence': 100}, {'width': 37, 'height': 10, 'top': 665, 'bottom': 676, 'right': 56, 'left': 19, 'word': 'Rupees', 'confidence': 100}, {'width': 25, 'height': 13, 'top': 665, 'bottom': 678, 'right': 84, 'left': 59, 'word': 'Four', 'confidence': 100}, {'width': 53, 'height': 13, 'top': 665, 'bottom': 678, 'right': 141, 'left': 87, 'word': 'Thousand', 'confidence': 100}, {'width': 25, 'height': 13, 'top': 665, 'bottom': 678, 'right': 169, 'left': 144, 'word': 'Nine', 'confidence': 100}, {'width': 47, 'height': 13, 'top': 665, 'bottom': 678, 'right': 220, 'left': 172, 'word': 'Hundred', 'confidence': 100}, {'width': 25, 'height': 13, 'top': 665, 'bottom': 678, 'right': 248, 'left': 223, 'word': 'Fifty', 'confidence': 100}, {'width': 16, 'height': 13, 'top': 665, 'bottom': 678, 'right': 268, 'left': 251, 'word': 'Six', 'confidence': 100}, {'width': 25, 'height': 13, 'top': 665, 'bottom': 678, 'right': 296, 'left': 271, 'word': 'Only', 'confidence': 100}, {'width': 28, 'height': 13, 'top': 690, 'bottom': 703, 'right': 48, 'left': 19, 'word': 'Bank', 'confidence': 100}, {'width': 38, 'height': 13, 'top': 690, 'bottom': 703, 'right': 89, 'left': 51, 'word': 'Details', 'confidence': 100}, {'width': 3, 'height': 13, 'top': 690, 'bottom': 703, 'right': 96, 'left': 93, 'word': ':', 'confidence': 100}, {'width': 38, 'height': 13, 'top': 690, 'bottom': 703, 'right': 143, 'left': 105, 'word': 'PUNJAB', 'confidence': 100}, {'width': 7, 'height': 13, 'top': 690, 'bottom': 703, 'right': 154, 'left': 146, 'word': '&', 'confidence': 100}, {'width': 24, 'height': 13, 'top': 690, 'bottom': 703, 'right': 181, 'left': 157, 'word': 'SIND', 'confidence': 100}, {'width': 29, 'height': 13, 'top': 690, 'bottom': 703, 'right': 215, 'left': 186, 'word': 'BANK,', 'confidence': 100}, {'width': 50, 'height': 13, 'top': 690, 'bottom': 703, 'right': 269, 'left': 218, 'word': 'ZIRAKPUR', 'confidence': 100}, {'width': 17, 'height': 13, 'top': 690, 'bottom': 703, 'right': 290, 'left': 272, 'word': 'A/C', 'confidence': 100}, {'width': 105, 'height': 13, 'top': 690, 'bottom': 703, 'right': 398, 'left': 293, 'word': 'NO.08841100000294,', 'confidence': 100}, {'width': 22, 'height': 13, 'top': 690, 'bottom': 703, 'right': 424, 'left': 401, 'word': 'IFSC', 'confidence': 100}, {'width': 27, 'height': 13, 'top': 690, 'bottom': 703, 'right': 455, 'left': 428, 'word': 'CODE', 'confidence': 100}, {'width': 7, 'height': 13, 'top': 690, 'bottom': 703, 'right': 467, 'left': 459, 'word': ':-', 'confidence': 100}, {'width': 64, 'height': 13, 'top': 690, 'bottom': 703, 'right': 535, 'left': 470, 'word': 'PSIB0000884', 'confidence': 100}, {'width': 24, 'height': 9, 'top': 717, 'bottom': 726, 'right': 43, 'left': 19, 'word': 'Terms', 'confidence': 100}, {'width': 6, 'height': 9, 'top': 717, 'bottom': 726, 'right': 52, 'left': 45, 'word': '&', 'confidence': 100}, {'width': 40, 'height': 9, 'top': 717, 'bottom': 726, 'right': 95, 'left': 54, 'word': 'Conditions', 'confidence': 100}, {'width': 39, 'height': 9, 'top': 717, 'bottom': 726, 'right': 319, 'left': 280, 'word': 'Receivers', 'confidence': 100}, {'width': 37, 'height': 9, 'top': 717, 'bottom': 726, 'right': 359, 'left': 321, 'word': 'Signature', 'confidence': 100}, {'width': 3, 'height': 10, 'top': 717, 'bottom': 728, 'right': 371, 'left': 367, 'word': ':', 'confidence': 100}, {'width': 14, 'height': 10, 'top': 730, 'bottom': 741, 'right': 33, 'left': 19, 'word': 'E.&', 'confidence': 100}, {'width': 16, 'height': 10, 'top': 730, 'bottom': 741, 'right': 52, 'left': 36, 'word': 'O.E.', 'confidence': 100}, {'width': 7, 'height': 10, 'top': 743, 'bottom': 754, 'right': 27, 'left': 19, 'word': '1.', 'confidence': 100}, {'width': 24, 'height': 10, 'top': 743, 'bottom': 754, 'right': 54, 'left': 30, 'word': 'Goods', 'confidence': 100}, {'width': 18, 'height': 10, 'top': 743, 'bottom': 754, 'right': 75, 'left': 56, 'word': 'once', 'confidence': 100}, {'width': 15, 'height': 10, 'top': 743, 'bottom': 754, 'right': 94, 'left': 78, 'word': 'sold', 'confidence': 100}, {'width': 13, 'height': 10, 'top': 743, 'bottom': 754, 'right': 109, 'left': 96, 'word': 'will', 'confidence': 100}, {'width': 13, 'height': 10, 'top': 743, 'bottom': 754, 'right': 124, 'left': 111, 'word': 'not', 'confidence': 100}, {'width': 9, 'height': 10, 'top': 743, 'bottom': 754, 'right': 136, 'left': 126, 'word': 'be', 'confidence': 100}, {'width': 21, 'height': 10, 'top': 743, 'bottom': 754, 'right': 160, 'left': 139, 'word': 'taken', 'confidence': 100}, {'width': 20, 'height': 10, 'top': 743, 'bottom': 754, 'right': 183, 'left': 163, 'word': 'back.', 'confidence': 100}, {'width': 7, 'height': 10, 'top': 756, 'bottom': 767, 'right': 27, 'left': 19, 'word': '2.', 'confidence': 100}, {'width': 29, 'height': 10, 'top': 756, 'bottom': 767, 'right': 60, 'left': 30, 'word': 'Interest', 'confidence': 100}, {'width': 7, 'height': 10, 'top': 756, 'bottom': 767, 'right': 71, 'left': 63, 'word': '@', 'confidence': 100}, {'width': 17, 'height': 10, 'top': 756, 'bottom': 767, 'right': 91, 'left': 74, 'word': '18%', 'confidence': 100}, {'width': 14, 'height': 10, 'top': 756, 'bottom': 767, 'right': 109, 'left': 95, 'word': 'p.a.', 'confidence': 100}, {'width': 12, 'height': 10, 'top': 756, 'bottom': 767, 'right': 124, 'left': 112, 'word': 'will', 'confidence': 100}, {'width': 8, 'height': 10, 'top': 756, 'bottom': 767, 'right': 136, 'left': 128, 'word': 'be', 'confidence': 100}, {'width': 30, 'height': 10, 'top': 756, 'bottom': 767, 'right': 170, 'left': 140, 'word': 'charged', 'confidence': 100}, {'width': 4, 'height': 10, 'top': 756, 'bottom': 767, 'right': 178, 'left': 174, 'word': 'if', 'confidence': 100}, {'width': 13, 'height': 10, 'top': 756, 'bottom': 767, 'right': 193, 'left': 180, 'word': 'the', 'confidence': 100}, {'width': 33, 'height': 10, 'top': 756, 'bottom': 767, 'right': 229, 'left': 195, 'word': 'payment', 'confidence': 100}, {'width': 17, 'height': 13, 'top': 756, 'bottom': 769, 'right': 489, 'left': 471, 'word': 'For', 'confidence': 100}, {'width': 7, 'height': 13, 'top': 756, 'bottom': 769, 'right': 500, 'left': 492, 'word': 'S', 'confidence': 100}, {'width': 7, 'height': 13, 'top': 756, 'bottom': 769, 'right': 510, 'left': 502, 'word': 'S', 'confidence': 100}, {'width': 81, 'height': 13, 'top': 756, 'bottom': 769, 'right': 594, 'left': 513, 'word': 'CONSULTANTS', 'confidence': 100}, {'width': 6, 'height': 9, 'top': 769, 'bottom': 779, 'right': 26, 'left': 19, 'word': 'is', 'confidence': 100}, {'width': 13, 'height': 9, 'top': 769, 'bottom': 779, 'right': 41, 'left': 28, 'word': 'not', 'confidence': 100}, {'width': 21, 'height': 9, 'top': 769, 'bottom': 779, 'right': 65, 'left': 43, 'word': 'made', 'confidence': 100}, {'width': 16, 'height': 9, 'top': 769, 'bottom': 779, 'right': 84, 'left': 67, 'word': 'with', 'confidence': 100}, {'width': 6, 'height': 9, 'top': 769, 'bottom': 779, 'right': 94, 'left': 87, 'word': 'in', 'confidence': 100}, {'width': 12, 'height': 9, 'top': 769, 'bottom': 779, 'right': 109, 'left': 97, 'word': 'the', 'confidence': 100}, {'width': 38, 'height': 9, 'top': 769, 'bottom': 779, 'right': 149, 'left': 111, 'word': 'stipulated', 'confidence': 100}, {'width': 19, 'height': 9, 'top': 769, 'bottom': 779, 'right': 171, 'left': 152, 'word': 'time.', 'confidence': 100}, {'width': 7, 'height': 9, 'top': 782, 'bottom': 792, 'right': 27, 'left': 19, 'word': '3.', 'confidence': 100}, {'width': 28, 'height': 9, 'top': 782, 'bottom': 792, 'right': 59, 'left': 30, 'word': 'Subject', 'confidence': 100}, {'width': 7, 'height': 9, 'top': 782, 'bottom': 792, 'right': 68, 'left': 61, 'word': 'to', 'confidence': 100}, {'width': 30, 'height': 9, 'top': 782, 'bottom': 792, 'right': 102, 'left': 72, 'word': 'Punjab', 'confidence': 100}, {'width': 42, 'height': 9, 'top': 782, 'bottom': 792, 'right': 147, 'left': 105, 'word': 'Jurisdiction', 'confidence': 100}, {'width': 18, 'height': 9, 'top': 782, 'bottom': 792, 'right': 169, 'left': 151, 'word': 'only.', 'confidence': 100}, {'width': 60, 'height': 13, 'top': 795, 'bottom': 809, 'right': 538, 'left': 478, 'word': 'Authorised', 'confidence': 100}, {'width': 52, 'height': 13, 'top': 795, 'bottom': 809, 'right': 594, 'left': 541, 'word': 'Signatory', 'confidence': 100}]]
    trained_info = {'width': 36, 'height': 14,'scope': {'top': 19, 'bottom': 33, 'right': 55, 'left': 19}, 'keyword': 'GSTIN', 'confidence': 100, 'page_no':0}

    print(get_index(ocr_data, trained_info))